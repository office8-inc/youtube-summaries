# ğŸ“º 100ä¸‡ãƒ‰ãƒ«ã®ã‚³ã‚¹ãƒˆãŒã‹ã‹ã£ãŸãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ã‚¨ãƒª

## ğŸ“‹ å‹•ç”»æƒ…å ±

- **ã‚¿ã‚¤ãƒˆãƒ«**: The Database Query That Cost $1,000,000
- **ãƒãƒ£ãƒ³ãƒãƒ«**: Coding with Lewis
- **å‹•ç”»URL**: [https://www.youtube.com/watch?v=e4nGjTsvADc](https://www.youtube.com/watch?v=e4nGjTsvADc)
- **å‹•ç”»ID**: e4nGjTsvADc
- **å…¬é–‹æ—¥**: 2025å¹´12æœˆ11æ—¥ 02:18
- **å†ç”Ÿå›æ•°**: 534,767 å›
- **é«˜è©•ä¾¡æ•°**: 0

## ğŸ’¡ æ¦‚è¦

ShopifyãŒãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°ãƒ„ãƒ¼ãƒ«ã®ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³æ§‹ç¯‰ä¸­ã«ã€Google BigQueryã®ä½¿ç”¨æ–™ãŒæœˆé–“ç´„100ä¸‡ãƒ‰ãƒ«ã«é”ã—ã‹ã‘ãŸå®Ÿä¾‹ã‚’ç´¹ä»‹ã™ã‚‹çŸ­ç·¨å‹•ç”»ã§ã™ã€‚æœ€é©åŒ–å‰ã¯1ã‚¯ã‚¨ãƒªã‚ãŸã‚Š75GBã®ãƒ‡ãƒ¼ã‚¿ã‚’å‡¦ç†ã—ã¦ãŠã‚Šã€æœˆé–“260ä¸‡ã‚¯ã‚¨ãƒªã§è†¨å¤§ãªã‚³ã‚¹ãƒˆãŒç™ºç”Ÿã—ã¦ã„ã¾ã—ãŸã€‚ã—ã‹ã—ã€æ—¥ä»˜ã‚„åœ°ç†æƒ…å ±ãªã©ã§ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ã‚¯ãƒ©ã‚¹ã‚¿ãƒªãƒ³ã‚°ã™ã‚‹ã“ã¨ã§ã€ã‚¯ã‚¨ãƒªã‚µã‚¤ã‚ºã‚’75GBã‹ã‚‰508MBã¾ã§å‰Šæ¸›ã—ã€æœˆé¡ã‚³ã‚¹ãƒˆã‚’1,400ãƒ‰ãƒ«ä»¥ä¸‹ã«æŠ‘ãˆã‚‹ã“ã¨ã«æˆåŠŸã—ã¾ã—ãŸã€‚ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æœ€é©åŒ–ã®é‡è¦æ€§ã‚’ç«¯çš„ã«ç¤ºã™æ•™è¨“çš„ãªäº‹ä¾‹ã§ã™ã€‚

## â­ é‡è¦ãªãƒã‚¤ãƒ³ãƒˆ

- **é©šç•°çš„ãªã‚³ã‚¹ãƒˆ**: æœ€é©åŒ–å‰ã€BigQueryã®ã‚¯ã‚¨ãƒªã‚³ã‚¹ãƒˆãŒæœˆé–“ç´„100ä¸‡ãƒ‰ãƒ«ï¼ˆ260ä¸‡ã‚¯ã‚¨ãƒª Ã— 75GB/ã‚¯ã‚¨ãƒªï¼‰ã«é”ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã£ãŸ
- **ã‚¯ãƒ©ã‚¹ã‚¿ãƒªãƒ³ã‚°ã«ã‚ˆã‚‹åŠ‡çš„ãªæ”¹å–„**: æ—¥ä»˜ã€åœ°ç†æƒ…å ±ã€ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ãªã©ã§ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ã‚¯ãƒ©ã‚¹ã‚¿ãƒªãƒ³ã‚°ã—ãŸçµæœã€ã‚¯ã‚¨ãƒªã‚µã‚¤ã‚ºãŒ75GBâ†’508MBã«å‰Šæ¸›ï¼ˆç´„147åˆ†ã®1ï¼‰
- **ã‚³ã‚¹ãƒˆå‰Šæ¸›åŠ¹æœ**: æœ€é©åŒ–å¾Œã€æœˆé¡ã‚³ã‚¹ãƒˆãŒ100ä¸‡ãƒ‰ãƒ«â†’1,400ãƒ‰ãƒ«ä»¥ä¸‹ã«æ¿€æ¸›ã—ã€99.86%ã®ã‚³ã‚¹ãƒˆå‰Šæ¸›ã‚’å®Ÿç¾
- **ã‚¯ãƒ©ã‚¦ãƒ‰ã®å¾“é‡èª²é‡‘ã®è½ã¨ã—ç©´**: BigQueryã¯å‡¦ç†ãƒ‡ãƒ¼ã‚¿é‡ã«å¿œã˜ã¦èª²é‡‘ã•ã‚Œã‚‹ãŸã‚ã€ã‚¯ã‚¨ãƒªã®åŠ¹ç‡åŒ–ãŒç›´æ¥çš„ã«ã‚³ã‚¹ãƒˆã«å½±éŸ¿ã™ã‚‹
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆã®é‡è¦æ€§**: å¤§è¦æ¨¡ãƒ‡ãƒ¼ã‚¿ã‚’æ‰±ã†éš›ã¯ã€æœ€åˆã‹ã‚‰ã‚¯ã‚¨ãƒªãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’è€ƒæ…®ã—ãŸãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆãŒä¸å¯æ¬ ã§ã‚ã‚‹ã“ã¨ã‚’ç¤ºã™æ•™è¨“

## ğŸ“– è©³ç´°å†…å®¹

### ğŸ¬ å°å…¥

Imagine losing $1 million when you run a single database query. Well, Shopify almost did that. And when they were building a data pipeline for this marketing tool they were building, they use something called Big Query, a data warehouse tool by Google that can query fast and store a crazy amount of data, especially if you're a big company. So, they entered their massive amount of data and found a shocking discovery. 75 GB of data was being queried every single time.

### ğŸ“‹ èƒŒæ™¯ãƒ»æ¦‚è¦

Now, Big Query charges you per data queried. So the more data that you query, the more it will cost you. But after doing the math, 60 requests per minute times 60 minutes time 24 hours times 30 days turns into 2 and 12 million queries per month, which when Google comes to collect their bill, it's just short of $1 million. The solution, well, to get their bread up. Okay, they clustered their database, meaning that they can sort columns based off of date, geography, timestamp, and more.

### â­ ä¸»è¦ãƒã‚¤ãƒ³ãƒˆ

then BigQuery just goes for that instead of everything all at once that you're never going to use anyway. So after that optimization, 75 gigabytes went down to 508 megabytes. Wow. Or just under $1,400 a month. Now the real winner here, the cloud.

### ğŸ“ è©³ç´°èª¬æ˜

Let me know what you want to see

---

<div align="center">

**ğŸ“ ã“ã®è¨˜äº‹ã¯è‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸã‚‚ã®ã§ã™**

ç”Ÿæˆæ—¥: 2025å¹´12æœˆ24æ—¥

</div>
